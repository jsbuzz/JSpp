<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<title>js++ DOM animation demo</title>
	
	<style type="text/css">
		* {
			font-family: Calibri,Helvetia,sans-serif;
		}

		body {
			padding:0;
			margin:0;
		}
		
		h1{
			margin:0;
			padding: 5px 20px;
			background-color: navy;
			color: white;
			border-bottom: 5px solid #555;
			margin-bottom: 10px;
		}
		
		h1 span{
			font-size: 13px;
			color: #ddd;
			display: inline-block;
			margin-left: 5px;
			padding-left: 5px;
			border-left: 1px solid #ddd;
		}

		h1 span strong{
			color: white;
		}
		
		div#colors{
			padding:5px;
			position: absolute;
			left:200px;
			top: 60px;
			border: 1px dotted #777;
		}
		
		div#colors div {
			color: white;
			padding: 4px;
			font-size: 12px;
			width:100px;
			height:100px;
			position: relative;
		}
		div#red   {background-color: red;}
		div#green {background-color: green;}
		div#blue  {background-color: blue;}

	</style>

	<script type="text/javascript" src="../js++.js"></script>
	<script type="text/javascript" src="../SJL/iterators.js"></script>
	<script type="text/javascript" src="../SJL/dom.js"></script>
	<script type="text/javascript" src="../SJL/dom.animation.js"></script>
	<script type="text/javascript">
	var $  = DOM.Element,
	    $$ = DOM.query;

	function loadTest()
	{	
		minimize = new DOM.Effect.ScalableEffect(DOM.EffectEngine,DOM.ElementInterface,{margin:45,width:10,height:10,top:25});
		restore = new DOM.Effect.ScalableEffect(DOM.EffectEngine,DOM.ElementInterface,{margin:0,width:100,height:100,top:0});

		blinkAnimation = 
			DOM.Animation.create(minimize,{duration:400},$$('div#colors div'))
			.concat(
			DOM.Animation.create(restore,{duration:400},$$('div#colors div')));
		
		$('#red').innerHTML = 'flat';
		$('#green').innerHTML = 'burst';
		$('#blue').innerHTML = 'accelerate';
		
		$$('div#colors div').foreach(function(){
			this.events.listen('click').handler = function(){
				DOM.Animation.factory({duration:800,width:800,engine:this.innerHTML}).apply(this);
			}
		});
	}
	
	function engineDifference(step)
	{
		$$('#colors div').foreach(DOM.Element.customMethods.stop);

		var showTheDifference = function(){
			DOM.Animation.factory({duration:800,width:800,engine:'flat'}).apply($('#red'));
			DOM.Animation.factory({duration:800,width:800,engine:'burst'}).apply($('#green'));
			DOM.Animation.factory({duration:800,width:800,engine:'accelerate'}).apply($('#blue'));
		};
		DOM.Animation.factory({duration:200,width:100,height:100,opacity:10},$$('#colors div')).concat(
			DOM.Animation.factory({duration:800,opacity:100},$$('#colors div'),showTheDifference)
		).run();
	}
	
	function reset()
	{
		DOM.Animation.factory({duration:200,width:100,height:100},$$('#colors div')).run();
	}
	</script>
</head>

<body onload="loadTest()">
	<h1>DOM.Animation tests <span>using <strong>SJL/dom.js</strong><br/>Standard Js++ Library</span></h1>
	
	<div id="colors">
		<b>Animation engine types:</b>
		<div id="red"></div>
		<div id="green"></div>
		<div id="blue"></div>
	</div>
	<button onclick="engineDifference()">run all</button>
	<button onclick="reset()">reset</button>

</body>
</html>